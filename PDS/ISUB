/* Rexx ISUB*/
"ISREDIT MACRO"
address ispexec
'ISREDIT (openmbr) = MEMBER'
'ISREDIT (opendsn)  = DATASET'
CALL OUTTRAP 'OUT.'
if openmbr = '' then
   address tso "submit '"opendsn"'"
else
   address tso "submit '"opendsn'('openmbr')'"'"
CALL OUTTRAP 'OFF'
DO I = 1 TO OUT.0
   PARSE VAR OUT.I 'JOB' JOBNAME '(' JOBID ')' STATUS
END I
SUBJOBNAME = STRIP(JOBNAME,B)
SUBJOBID   = STRIP(JOBID,B)
SUBJOB     = SUBJOBNAME || "(" || SUBJOBID || ")"
SAY "SUBMITTED JOB =" SUBJOB
JOBDONE = 'NO'
DO UNTIL JOBDONE = 'YES'
     CALL OUTTRAP 'OUT.'
     ADDRESS TSO "ST" SUBJOB
     CALL OUTTRAP 'OFF'
     DO I = 1 TO OUT.0
        PARSE VAR OUT.I 'JOB ' JOBNAME '(' JOBID ')' STATUS
        STATUS = STRIP(STATUS)
        IF POS('ON OUTPUT QUEUE',STATUS) > 0
        THEN JOBDONE = 'YES'
        ELSE NOP
           /* ADDRESS TSO "TSOWAIT " WAITAMOUNT */
     END I
END
PRINTDSN = "'"||USERID()||".JOBTEMP."||JOBNAME||"."||JOBID||"'"
ADDRESS TSO "OUTPUT " SUBJOB " PRINT("PRINTDSN") KEEP HOLD"

EDITDSNAME = PRINTDSN
ADDRESS ISPEXEC "BROWSE DATASET("EDITDSNAME")"
RETURN
